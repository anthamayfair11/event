<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex, nofollow">
  <title>ã‚ˆãã‚ã‚‹è³ªå•ï½œã‚¤ãƒ™ãƒ³ãƒˆQ&A</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .search-box {
      max-width: 600px;
      margin: 0 auto 2rem;
    }
    .tab-icon {
      margin-right: 0.5rem;
    }
    .no-results {
      text-align: center;
      padding: 3rem 1rem;
      color: #6c757d;
    }
    .search-highlight {
      background-color: #fff3cd;
      padding: 0 0.2rem;
    }
    .countdown-timer {
      border-radius: 15px;
      overflow: hidden;
    }
    .countdown-item {
      text-align: center;
      min-width: 60px;
    }
    .countdown-number {
      font-size: 2rem;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.2;
    }
    .countdown-label {
      font-size: 0.75rem;
      color: #6c757d;
      font-weight: 500;
      margin-top: 0.25rem;
    }
    .participation-status {
      border-radius: 15px;
      overflow: hidden;
    }
    .participation-number {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    @media (max-width: 576px) {
      .countdown-number {
        font-size: 1.75rem;
      }
      .countdown-item {
        min-width: 50px;
      }
      .participation-number {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body class="bg-light">

  <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
    <div class="container">
      <span class="navbar-brand mb-0 h1">ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±</span>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="../requirements/">ğŸ“‹ å‹Ÿé›†è¦é …</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="../QA/">â“ ã‚ˆãã‚ã‚‹è³ªå•</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../vote/">ğŸ—³ï¸ æŠ•ç¥¨</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container py-5">
    <!-- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼ -->
    <div class="countdown-timer card shadow-sm mb-4">
      <div class="card-body p-3">
        <div class="text-center">
          <div class="small text-muted mb-2">
            <i class="bi bi-clock"></i> ã‚¤ãƒ™ãƒ³ãƒˆã¾ã§
          </div>
          <div id="countdown" class="d-flex justify-content-center gap-2 flex-wrap">
            <div class="countdown-item">
              <div class="countdown-number" id="days">--</div>
              <div class="countdown-label">æ—¥</div>
            </div>
            <div class="countdown-item">
              <div class="countdown-number" id="hours">--</div>
              <div class="countdown-label">æ™‚é–“</div>
            </div>
            <div class="countdown-item">
              <div class="countdown-number" id="minutes">--</div>
              <div class="countdown-label">åˆ†</div>
            </div>
            <div class="countdown-item">
              <div class="countdown-number" id="seconds">--</div>
              <div class="countdown-label">ç§’</div>
            </div>
          </div>
          <div id="event-status" class="mt-2 small text-muted" style="display: none;"></div>
        </div>
      </div>
    </div>

    <!-- å‚åŠ ç”³è¾¼çŠ¶æ³ -->
    <div class="participation-status card shadow-sm mb-4">
      <div class="card-body p-3">
        <div class="text-center mb-2">
          <div class="small text-muted mb-2">
            <i class="bi bi-people-fill"></i> ç¾åœ¨ã®å‚åŠ äºˆå®šè€…
          </div>
          <div class="d-flex justify-content-center align-items-baseline gap-2">
            <span class="participation-number" id="current-participants">4</span>
            <span class="text-muted small">/ ç›®æ¨™ <span id="target-participants">20</span>å</span>
          </div>
        </div>
        <div class="progress" style="height: 20px; border-radius: 10px;">
          <div class="progress-bar progress-bar-striped progress-bar-animated"
               role="progressbar"
               id="participation-progress"
               style="width: 20%; background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);"
               aria-valuenow="20"
               aria-valuemin="0"
               aria-valuemax="100">
            <strong>20%</strong>
          </div>
        </div>
        <div class="text-center mt-2">
          <small class="text-muted">
            <i class="bi bi-info-circle"></i> ã‚ã¨16åã§ç›®æ¨™é”æˆï¼
          </small>
        </div>
      </div>
    </div>

    <h1 class="text-center mb-4">ã‚ˆãã‚ã‚‹è³ªå•</h1>

    <!-- æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ -->
    <div class="search-box">
      <div class="input-group">
        <span class="input-group-text">ğŸ”</span>
        <input
          type="text"
          class="form-control"
          id="searchInput"
          placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢..."
          autocomplete="off"
        >
        <button class="btn btn-outline-secondary" type="button" id="clearSearch">ã‚¯ãƒªã‚¢</button>
      </div>
    </div>

    <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <ul class="nav nav-tabs mb-3" id="categoryTabs" role="tablist">
      <!-- ã‚¿ãƒ–ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
    </ul>

    <!-- ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="tab-content" id="categoryTabContent">
      <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
    </div>

    <footer class="text-center mt-5 text-muted small">
      Â© 2025 ã‚¤ãƒ™ãƒ³ãƒˆé‹å–¶äº‹å‹™å±€
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼
    (function() {
      // ã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬æ—¥æ™‚: 2025å¹´11æœˆ15æ—¥ï¼ˆåœŸï¼‰13:00
      const eventDate = new Date('2025-11-15T13:00:00').getTime();

      function updateCountdown() {
        const now = new Date().getTime();
        const distance = eventDate - now;

        // æ™‚é–“è¨ˆç®—
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // DOMæ›´æ–°
        document.getElementById('days').textContent = days;
        document.getElementById('hours').textContent = hours;
        document.getElementById('minutes').textContent = minutes;
        document.getElementById('seconds').textContent = seconds;

        // ã‚¤ãƒ™ãƒ³ãƒˆçµ‚äº†å¾Œã®å‡¦ç†
        if (distance < 0) {
          clearInterval(countdownInterval);
          document.getElementById('countdown').style.display = 'none';
          document.getElementById('event-status').style.display = 'block';
          document.getElementById('event-status').innerHTML = '<strong>ğŸ‰ ã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬ä¸­ã¾ãŸã¯çµ‚äº†ã—ã¾ã—ãŸ</strong>';
        }
      }

      // åˆå›å®Ÿè¡Œ
      updateCountdown();

      // 1ç§’ã”ã¨ã«æ›´æ–°
      const countdownInterval = setInterval(updateCountdown, 1000);
    })();

    // å‚åŠ ç”³è¾¼çŠ¶æ³ã®æ›´æ–°
    (function() {
      // ã“ã“ã§å‚åŠ è€…æ•°ã‚’è¨­å®šï¼ˆç®¡ç†è€…ãŒæ‰‹å‹•ã§å¤‰æ›´ï¼‰
      const currentParticipants = 4;
      const targetParticipants = 20;

      function updateParticipationStatus() {
        // ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸è¨ˆç®—
        const percentage = Math.round((currentParticipants / targetParticipants) * 100);
        const remaining = targetParticipants - currentParticipants;

        // DOMæ›´æ–°
        document.getElementById('current-participants').textContent = currentParticipants;
        document.getElementById('target-participants').textContent = targetParticipants;

        const progressBar = document.getElementById('participation-progress');
        progressBar.style.width = percentage + '%';
        progressBar.textContent = percentage + '%';
        progressBar.setAttribute('aria-valuenow', percentage);

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ›´æ–°
        const statusMessage = document.querySelector('.participation-status .text-center.mt-2 small');
        if (currentParticipants >= targetParticipants) {
          statusMessage.innerHTML = '<i class="bi bi-check-circle-fill text-success"></i> ç›®æ¨™é”æˆï¼ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™';
          progressBar.classList.remove('progress-bar-animated');
          progressBar.style.background = 'linear-gradient(90deg, #48bb78 0%, #38a169 100%)';
        } else {
          statusMessage.innerHTML = '<i class="bi bi-info-circle"></i> ã‚ã¨' + remaining + 'åã§ç›®æ¨™é”æˆï¼';
        }
      }

      // åˆå›å®Ÿè¡Œ
      updateParticipationStatus();
    })();
  </script>
  <script>
    let allData = null;
    let currentTabInstance = null;

    // JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Q&Aãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§è¡¨ç¤º
    async function loadFAQs() {
      try {
        const response = await fetch('faqs.json');
        if (!response.ok) throw new Error('JSONãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');

        allData = await response.json();

        // ã‚¿ãƒ–ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆ
        renderTabs();
        renderAllCategories();

        // æœ€åˆã®ã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
        const firstTab = document.querySelector('#categoryTabs .nav-link');
        if (firstTab) {
          const tab = new bootstrap.Tab(firstTab);
          tab.show();
        }

      } catch (error) {
        console.error('ã‚¨ãƒ©ãƒ¼:', error);
        const container = document.getElementById('categoryTabContent');
        const errorMsg = document.createElement('div');
        errorMsg.className = 'alert alert-danger';
        errorMsg.textContent = 'Q&Aãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚';
        container.appendChild(errorMsg);
      }
    }

    // ã‚¿ãƒ–ã‚’ç”Ÿæˆ
    function renderTabs() {
      const tabsContainer = document.getElementById('categoryTabs');
      tabsContainer.innerHTML = '';

      allData.categories.forEach((category, index) => {
        const li = document.createElement('li');
        li.className = 'nav-item';
        li.setAttribute('role', 'presentation');

        const button = document.createElement('button');
        button.className = index === 0 ? 'nav-link active' : 'nav-link';
        button.id = `${category.id}-tab`;
        button.setAttribute('data-bs-toggle', 'tab');
        button.setAttribute('data-bs-target', `#${category.id}`);
        button.setAttribute('type', 'button');
        button.setAttribute('role', 'tab');
        button.setAttribute('aria-controls', category.id);
        button.setAttribute('aria-selected', index === 0 ? 'true' : 'false');

        // ã‚¢ã‚¤ã‚³ãƒ³ã¨ã‚«ãƒ†ã‚´ãƒªåã‚’è¿½åŠ ï¼ˆXSSå¯¾ç­–: textContentã‚’åˆ†ã‘ã¦ä½¿ç”¨ï¼‰
        const iconSpan = document.createElement('span');
        iconSpan.className = 'tab-icon';
        iconSpan.textContent = category.icon;

        const nameText = document.createTextNode(category.name);

        button.appendChild(iconSpan);
        button.appendChild(nameText);

        li.appendChild(button);
        tabsContainer.appendChild(li);
      });
    }

    // ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆ
    function renderAllCategories() {
      const container = document.getElementById('categoryTabContent');
      container.innerHTML = '';

      allData.categories.forEach((category, index) => {
        const tabPane = document.createElement('div');
        tabPane.className = index === 0 ? 'tab-pane fade show active' : 'tab-pane fade';
        tabPane.id = category.id;
        tabPane.setAttribute('role', 'tabpanel');
        tabPane.setAttribute('aria-labelledby', `${category.id}-tab`);

        const accordion = createAccordion(category.faqs, category.id);
        tabPane.appendChild(accordion);
        container.appendChild(tabPane);
      });
    }

    // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚’ç”Ÿæˆ
    function createAccordion(faqs, categoryId) {
      const accordion = document.createElement('div');
      accordion.className = 'accordion';
      accordion.id = `accordion-${categoryId}`;

      faqs.forEach(faq => {
        const item = createAccordionItem(faq, categoryId);
        accordion.appendChild(item);
      });

      return accordion;
    }

    // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’ç”Ÿæˆ
    function createAccordionItem(faq, parentId) {
      const item = document.createElement('div');
      item.className = 'accordion-item';
      item.setAttribute('data-faq-id', faq.id);
      item.setAttribute('data-question', faq.question.toLowerCase());
      item.setAttribute('data-answer', faq.answer.toLowerCase());

      // ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ†
      const header = document.createElement('h2');
      header.className = 'accordion-header';
      header.id = `heading-${parentId}-${faq.id}`;

      const button = document.createElement('button');
      button.className = faq.defaultOpen ? 'accordion-button' : 'accordion-button collapsed';
      button.type = 'button';
      button.setAttribute('data-bs-toggle', 'collapse');
      button.setAttribute('data-bs-target', `#collapse-${parentId}-${faq.id}`);
      button.setAttribute('aria-expanded', faq.defaultOpen ? 'true' : 'false');
      button.setAttribute('aria-controls', `collapse-${parentId}-${faq.id}`);
      // XSSå¯¾ç­–: textContentã‚’ä½¿ç”¨
      button.textContent = `Q. ${faq.question}`;

      header.appendChild(button);

      // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„éƒ¨åˆ†
      const collapseDiv = document.createElement('div');
      collapseDiv.id = `collapse-${parentId}-${faq.id}`;
      collapseDiv.className = faq.defaultOpen ? 'accordion-collapse collapse show' : 'accordion-collapse collapse';
      collapseDiv.setAttribute('aria-labelledby', `heading-${parentId}-${faq.id}`);
      collapseDiv.setAttribute('data-bs-parent', `#accordion-${parentId}`);

      const body = document.createElement('div');
      body.className = 'accordion-body';
      // XSSå¯¾ç­–: textContentã‚’ä½¿ç”¨
      body.textContent = `A. ${faq.answer}`;

      collapseDiv.appendChild(body);

      // å…¨ä½“ã‚’çµ„ã¿ç«‹ã¦
      item.appendChild(header);
      item.appendChild(collapseDiv);

      return item;
    }

    // æ¤œç´¢æ©Ÿèƒ½
    function handleSearch() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();

      if (!searchTerm) {
        // æ¤œç´¢èªãŒç©ºã®å ´åˆã¯é€šå¸¸è¡¨ç¤ºã«æˆ»ã™
        renderAllCategories();
        return;
      }

      // å…¨ã‚«ãƒ†ã‚´ãƒªã‹ã‚‰è©²å½“ã™ã‚‹è³ªå•ã‚’æŠ½å‡º
      const searchResults = [];
      allData.categories.forEach(category => {
        category.faqs.forEach(faq => {
          if (faq.question.toLowerCase().includes(searchTerm) ||
              faq.answer.toLowerCase().includes(searchTerm)) {
            searchResults.push({
              ...faq,
              categoryName: category.name,
              categoryIcon: category.icon
            });
          }
        });
      });

      // æ¤œç´¢çµæœã‚’è¡¨ç¤º
      displaySearchResults(searchResults, searchTerm);
    }

    // æ¤œç´¢çµæœã‚’è¡¨ç¤º
    function displaySearchResults(results, searchTerm) {
      const container = document.getElementById('categoryTabContent');
      container.innerHTML = '';

      const resultPane = document.createElement('div');
      resultPane.className = 'tab-pane fade show active';

      if (results.length === 0) {
        const noResults = document.createElement('div');
        noResults.className = 'no-results';
        noResults.innerHTML = `
          <p class="h5">ã€Œ${escapeHtml(searchTerm)}ã€ã«ä¸€è‡´ã™ã‚‹è³ªå•ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>
          <p class="text-muted mt-3">åˆ¥ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã—ã¦ã¿ã¦ãã ã•ã„</p>
        `;
        resultPane.appendChild(noResults);
      } else {
        const resultHeader = document.createElement('div');
        resultHeader.className = 'alert alert-info mb-3';
        resultHeader.textContent = `æ¤œç´¢çµæœ: ${results.length}ä»¶ã®è³ªå•ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`;
        resultPane.appendChild(resultHeader);

        const accordion = document.createElement('div');
        accordion.className = 'accordion';
        accordion.id = 'accordion-search';

        results.forEach(faq => {
          const item = createAccordionItem(faq, 'search');

          // ã‚«ãƒ†ã‚´ãƒªãƒãƒƒã‚¸ã‚’è¿½åŠ 
          const badge = document.createElement('span');
          badge.className = 'badge bg-secondary ms-2';
          badge.textContent = `${faq.categoryIcon} ${faq.categoryName}`;

          const button = item.querySelector('.accordion-button');
          button.appendChild(badge);

          accordion.appendChild(item);
        });

        resultPane.appendChild(accordion);
      }

      container.appendChild(resultPane);

      // ã‚¿ãƒ–ã‚’ã™ã¹ã¦éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
      document.querySelectorAll('#categoryTabs .nav-link').forEach(tab => {
        tab.classList.remove('active');
        tab.setAttribute('aria-selected', 'false');
      });
    }

    // HTML ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—é–¢æ•°
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // æ¤œç´¢ã‚¯ãƒªã‚¢
    function clearSearch() {
      document.getElementById('searchInput').value = '';
      renderAllCategories();

      // æœ€åˆã®ã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
      const firstTab = document.querySelector('#categoryTabs .nav-link');
      if (firstTab) {
        firstTab.classList.add('active');
        firstTab.setAttribute('aria-selected', 'true');
        const tab = new bootstrap.Tab(firstTab);
        tab.show();
      }
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
    document.addEventListener('DOMContentLoaded', () => {
      loadFAQs();

      // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆ
      const searchInput = document.getElementById('searchInput');
      searchInput.addEventListener('input', handleSearch);

      // ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³
      document.getElementById('clearSearch').addEventListener('click', clearSearch);

      // Enterã‚­ãƒ¼ã§æ¤œç´¢
      searchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          handleSearch();
        }
      });
    });
  </script>
</body>
</html>
